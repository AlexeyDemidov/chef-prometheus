# Global default settings.
global {
  scrape_interval: "15s"     # By default, scrape targets every 15 seconds.
  evaluation_interval: "15s" # By default, evaluate rules every 15 seconds.

  # Load and evaluate rules in this file every 'evaluation_interval' seconds. This field may be repeated.
  #rule_file: "prometheus.rules"
}

<% for job in @jobs||[] %>
job: {
  name: "<%= job.name %>",
  <% if job.scrape_interval %>
  scrape_interval: "<%= job.scrape_interval %>",
  <% end %>
  <% if job.sd_name %>
  sd_name: "<%= job.sd_name %>"
  <% else %>
  target_group: {
    <%= [job.target].flatten().collect { |t| %Q!target: "#{t}"! }.join(",\n") %>
  }
  <% end %>
}
<% end %>
